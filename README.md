# Gender Wage Gap (2019–2024)

Reproducible analysis of the U.S. gender wage gap using **CPS March ASEC** microdata (2019–2024).  
Code is in **R**, visuals are generated in R and surfaced on a simple site (GitHub Pages) plus an interactive **Power BI** report.

>  **Among full‑time workers aged 23–62, the adjusted female wage gap remains ~21–24 percentage points across 2019–2024. With additional controls the gap changes as shown below; for singles without young children it narrows to ~14 p.p.**

---

## Quick links

- **Interactive dashboard (Power BI)**: *(publish-to-web link)*  
  https://app.powerbi.com/view?r=eyJrIjoiYWIyZGVmMjUtYzc3My00OTAzLTgzODQtZWMyMzFjZjYyMDEzIiwidCI6ImE4MjE2YzFlLTRkNjMtNDM1Mi04YzNiLTUwZmExZjE0NzViMSIsImMiOjZ9
  **GitHub Pages**: https://bdepanfilis.github.io/Gender-Wage-Gap-2019-2024/
- **Key figures**: `dashboard/` (PNG)  
  **Tables**: `outputs/tables/` (CSV)

---

## Repo structure

```
/
├─ docs/                    # site (GitHub Pages)
│  └─ index.html
├─ r_scripts/               # R source code
│  ├─ Wrangle.R             # build per‑year CPS extracts
│  ├─ Analysis.R            # models + figures + tables
│  └─ run_all.R             # optional: sources Wrangle + analysis
├─ data/                    # place raw CPS CSVs here (not committed)
│  ├─ README.md             # what files to download, where to download, how to use
├─ outputs/
│  ├─ tables/               # small, audit‑ready outputs (committed)
│  │  ├─ gaps_by_spec.csv
│  │  └─ gap_trend.csv
│  └─ (per‑year folders generated by Wrangle.R; not committed)
├─ dashboard/               # R‑generated figures used 
│  ├─ trend_2019_2024.png
│  ├─ gaps_by_spec.png
│  └─ distribution.png
└─ README.md                # this file
```

> Raw CPS files and per‑year extracts are **not** committed (see `.gitignore`).

---

## How to reproduce

**Requirements**
- R ≥ 4.2
- Packages: `tidyverse`, `broom`, `ggplot2`, `scales`, `here`, `sandwich`, `lmtest`

Install packages once:

```r
install.packages(c("tidyverse","broom","ggplot2","scales","here","sandwich","lmtest"))
```

**1) Get the data**  
Download CPS ASEC public‑use CSV packages for **2019–2024** (search “CPS ASEC public use CSV 2019”, etc.). From each zip, place these two files into `data/`:

- `pppubYY.csv`  (person)  
- `hhpubYY.csv`  (household)  
(Where `YY` is 19, 20, …, 24.) See `data/README.md` for details.

**2) Run the pipeline**

```bash
Rscript r_scripts/Wrangle.R   # builds outputs/<year>/cpsmar_e.csv
Rscript r_scripts/analysis.R  # writes tables + figures
# or
Rscript r_scripts/run.R
```

Outputs written:
- `outputs/tables/gaps_by_spec.csv`, `outputs/tables/gap_trend.csv`
- `dashboard/*.png` used by the site

---

## What’s in the analysis

**Sample**
- Full‑time workers (≥48 weeks, ≥36 hours), ages 23–62, positive earnings.

**Models**
- Outcome: log hourly wage (`log(earnings / (weeks*hours))`)
- Sequential specifications:
  1. **Baseline**: female + age + age²
  2. **Add Education**: + HS/SomeCollege/College
  3. **Add Person**: + Black, Hispanic, South, City
  4. **Add Household**: + married, child < 6
  5. **Only Singles**: restrict to not married & no child < 6

**Uncertainty**
- Spec comparison uses **HC1 robust standard errors**.
- Year‑by‑year trend shows **OLS 95% CIs**.

---

## Key results (high level)

- **Baseline gap** ≈ **−18 p.p.** (female vs. male).  
- **Add Education**: gap widens to **≈ −25 p.p.** (reflects higher female education).  
- **Add Person/Household**: gap narrows to **≈ −22.7 p.p.**.  
- **Only Singles**: gap **≈ −14.1 p.p.**.  
- **2019–2024 trend**: adjusted gap persists in the **~21–24 p.p.** range with overlapping CIs.

> See `outputs/tables/gaps_by_spec.csv` and `outputs/tables/gap_trend.csv` for exact values.

---

## Figures

- `dashboard/trend_2019_2024.png` – Adjusted female wage gap by year (with 95% CI).  
- `dashboard/gaps_by_spec.png` – Side‑by‑side bars: gap (green, negative) + robust SE (light‑blue, positive).  
- `dashboard/distribution.png` – Earnings distributions by year & gender, with dashed mean lines and $ labels.

---

## Notes & license

- Data: CPS March ASEC public‑use microdata (U.S. Census Bureau).  
- Code & figures © Bradley DePanfilis. Consider using **MIT License** if you plan to publish/extend.

If you spot an issue or want to extend the analysis (e.g., additional years or alternative specifications), open an issue or PR.
